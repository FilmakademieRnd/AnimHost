\doxysection{Data\+Flow\+Graph\+Model.\+hpp}
\hypertarget{_data_flow_graph_model_8hpp_source}{}\label{_data_flow_graph_model_8hpp_source}\index{C:/Users/m5963/Documents/GitHub/AnimHost/AnimHost/core/QTNodes/include/QtNodes/internal/DataFlowGraphModel.hpp@{C:/Users/m5963/Documents/GitHub/AnimHost/AnimHost/core/QTNodes/include/QtNodes/internal/DataFlowGraphModel.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}AbstractGraphModel.hpp"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}ConnectionIdUtils.hpp"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}NodeDelegateModelRegistry.hpp"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}Serializable.hpp"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}StyleCollection.hpp"{}}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}Export.hpp"{}}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <QJsonObject>}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{namespace\ }QtNodes\ \{}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{keyword}{class\ }NODE\_EDITOR\_PUBLIC\ \mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model}{DataFlowGraphModel}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_qt_nodes_1_1_abstract_graph_model}{AbstractGraphModel}},\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_qt_nodes_1_1_serializable}{Serializable}}}
\DoxyCodeLine{00018\ \{}
\DoxyCodeLine{00019\ \ \ \ \ Q\_OBJECT}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_qt_nodes_1_1_data_flow_graph_model_1_1_node_geometry_data}{NodeGeometryData}}}
\DoxyCodeLine{00023\ \ \ \ \ \{}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ QSize\ size;}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ QPointF\ pos;}
\DoxyCodeLine{00026\ \ \ \ \ \};}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00029\ \ \ \ \ \mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model}{DataFlowGraphModel}}(std::shared\_ptr<NodeDelegateModelRegistry>\ registry);}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ std::shared\_ptr<NodeDelegateModelRegistry>\ dataModelRegistry()\ \{\ \textcolor{keywordflow}{return}\ \_registry;\ \}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00034\ \ \ \ \ std::unordered\_set<NodeId>\ \mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model_a5922406bb3fe0c02c02e82863ed6374c}{allNodeIds}}()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \ \ std::unordered\_set<ConnectionId>\ \mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model_acced49a29c8b8fcd510c0a3e1fd037d6}{allConnectionIds}}(\mbox{\hyperlink{_definitions_8hpp_a7883a827397342fb69135c5efaeedff3}{NodeId}}\ \textcolor{keyword}{const}\ nodeId)\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ std::unordered\_set<ConnectionId>\ \mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model_a062c3f2370b6d875121682b40ced6af4}{connections}}(\mbox{\hyperlink{_definitions_8hpp_a7883a827397342fb69135c5efaeedff3}{NodeId}}\ nodeId,}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_definitions_8hpp_aff7e048793aeeaab81751ee68740fb2f}{PortType}}\ portType,}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_definitions_8hpp_aafb370ff4bd2c34323873e8df74f4a4b}{PortIndex}}\ portIndex)\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model_a1984c256357ee5622d769a8e091a5dab}{connectionExists}}(\mbox{\hyperlink{struct_qt_nodes_1_1_connection_id}{ConnectionId}}\ \textcolor{keyword}{const}\ connectionId)\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \mbox{\hyperlink{_definitions_8hpp_a7883a827397342fb69135c5efaeedff3}{NodeId}}\ \mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model_a6972ef0939292fe34a8786f8245bdd92}{addNode}}(QString\ \textcolor{keyword}{const}\ nodeType)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model_a96ce1e4acb79e2dff3521d2c745ee689}{connectionPossible}}(\mbox{\hyperlink{struct_qt_nodes_1_1_connection_id}{ConnectionId}}\ \textcolor{keyword}{const}\ connectionId)\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model_ab74944dc993e8b69739ed3b2b0199d47}{addConnection}}(\mbox{\hyperlink{struct_qt_nodes_1_1_connection_id}{ConnectionId}}\ \textcolor{keyword}{const}\ connectionId)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model_a23ec795731696d51546484462f6f853e}{nodeExists}}(\mbox{\hyperlink{_definitions_8hpp_a7883a827397342fb69135c5efaeedff3}{NodeId}}\ \textcolor{keyword}{const}\ nodeId)\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ QVariant\ \mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model_af349af13955142a2f2322487b8067988}{nodeData}}(\mbox{\hyperlink{_definitions_8hpp_a7883a827397342fb69135c5efaeedff3}{NodeId}}\ nodeId,\ \mbox{\hyperlink{_definitions_8hpp_a21a521c8e3ae884aa19df1f67d7eb596}{NodeRole}}\ role)\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ NodeFlags\ nodeFlags(\mbox{\hyperlink{_definitions_8hpp_a7883a827397342fb69135c5efaeedff3}{NodeId}}\ nodeId)\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model_a084453c0ba6a808021385b230af99a33}{setNodeData}}(\mbox{\hyperlink{_definitions_8hpp_a7883a827397342fb69135c5efaeedff3}{NodeId}}\ nodeId,\ \mbox{\hyperlink{_definitions_8hpp_a21a521c8e3ae884aa19df1f67d7eb596}{NodeRole}}\ role,\ QVariant\ value)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ QVariant\ \mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model_ad54054e2e731eeb4fdce18e488eae4e9}{portData}}(\mbox{\hyperlink{_definitions_8hpp_a7883a827397342fb69135c5efaeedff3}{NodeId}}\ nodeId,}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_definitions_8hpp_aff7e048793aeeaab81751ee68740fb2f}{PortType}}\ portType,}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_definitions_8hpp_aafb370ff4bd2c34323873e8df74f4a4b}{PortIndex}}\ portIndex,}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_definitions_8hpp_af6d1882f3ed15bd00d36cce7f2093989}{PortRole}}\ role)\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordtype}{bool}\ setPortData(\mbox{\hyperlink{_definitions_8hpp_a7883a827397342fb69135c5efaeedff3}{NodeId}}\ nodeId,}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_definitions_8hpp_aff7e048793aeeaab81751ee68740fb2f}{PortType}}\ portType,}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_definitions_8hpp_aafb370ff4bd2c34323873e8df74f4a4b}{PortIndex}}\ portIndex,}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ QVariant\ \textcolor{keyword}{const}\ \&value,}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_definitions_8hpp_af6d1882f3ed15bd00d36cce7f2093989}{PortRole}}\ role\ =\ PortRole::Data)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordtype}{bool}\ deleteConnection(\mbox{\hyperlink{struct_qt_nodes_1_1_connection_id}{ConnectionId}}\ \textcolor{keyword}{const}\ connectionId)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordtype}{bool}\ deleteNode(\mbox{\hyperlink{_definitions_8hpp_a7883a827397342fb69135c5efaeedff3}{NodeId}}\ \textcolor{keyword}{const}\ nodeId)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ QJsonObject\ \mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model_a07556d53720721f2c1c304c7dea26a3c}{saveNode}}(\mbox{\hyperlink{_definitions_8hpp_a7883a827397342fb69135c5efaeedff3}{NodeId}}\ \textcolor{keyword}{const})\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ QJsonObject\ save()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model_ae20d23ca78004893b10caa052e5556b6}{loadNode}}(QJsonObject\ \textcolor{keyword}{const}\ \&nodeJson)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{void}\ load(QJsonObject\ \textcolor{keyword}{const}\ \&json)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ NodeDelegateModelType>}
\DoxyCodeLine{00086\ \ \ \ \ NodeDelegateModelType\ *\mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model_a3ff2a5c998afaf0ea053b7a1dd3f5a96}{delegateModel}}(\mbox{\hyperlink{_definitions_8hpp_a7883a827397342fb69135c5efaeedff3}{NodeId}}\ \textcolor{keyword}{const}\ nodeId)}
\DoxyCodeLine{00087\ \ \ \ \ \{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ \_models.find(nodeId);}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ ==\ \_models.end())}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ model\ =\ \textcolor{keyword}{dynamic\_cast<}NodeDelegateModelType\ *\textcolor{keyword}{>}(it-\/>second.get());}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ model;}
\DoxyCodeLine{00095\ \ \ \ \ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ Q\_SIGNALS:}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keywordtype}{void}\ inPortDataWasSet(\mbox{\hyperlink{_definitions_8hpp_a7883a827397342fb69135c5efaeedff3}{NodeId}}\ \textcolor{keyword}{const},\ \mbox{\hyperlink{_definitions_8hpp_aff7e048793aeeaab81751ee68740fb2f}{PortType}}\ \textcolor{keyword}{const},\ \mbox{\hyperlink{_definitions_8hpp_aafb370ff4bd2c34323873e8df74f4a4b}{PortIndex}}\ \textcolor{keyword}{const});}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \ \ \ \textcolor{keywordtype}{void}\ embeddedWidgetSizeUpdated(\mbox{\hyperlink{_definitions_8hpp_a7883a827397342fb69135c5efaeedff3}{NodeId}}\ \textcolor{keyword}{const});}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00103\ \ \ \ \ \mbox{\hyperlink{_definitions_8hpp_a7883a827397342fb69135c5efaeedff3}{NodeId}}\ \mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model_a2684cf375efedfdf0772299882d4ff77}{newNodeId}}()\textcolor{keyword}{\ override\ }\{\ \textcolor{keywordflow}{return}\ \_nextNodeId++;\ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keywordtype}{void}\ sendConnectionCreation(\mbox{\hyperlink{struct_qt_nodes_1_1_connection_id}{ConnectionId}}\ \textcolor{keyword}{const}\ connectionId);}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keywordtype}{void}\ sendConnectionDeletion(\mbox{\hyperlink{struct_qt_nodes_1_1_connection_id}{ConnectionId}}\ \textcolor{keyword}{const}\ connectionId);}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ \ }
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \textcolor{keyword}{private}\ Q\_SLOTS:}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model_ac37e3bb6714744b4a074262be4749404}{onOutPortDataUpdated}}(\mbox{\hyperlink{_definitions_8hpp_a7883a827397342fb69135c5efaeedff3}{NodeId}}\ \textcolor{keyword}{const}\ nodeId,\ \mbox{\hyperlink{_definitions_8hpp_aafb370ff4bd2c34323873e8df74f4a4b}{PortIndex}}\ \textcolor{keyword}{const}\ portIndex);}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_qt_nodes_1_1_data_flow_graph_model_a4027acf340554a7cf3007c66ae7f511d}{propagateEmptyDataTo}}(\mbox{\hyperlink{_definitions_8hpp_a7883a827397342fb69135c5efaeedff3}{NodeId}}\ \textcolor{keyword}{const}\ nodeId,\ \mbox{\hyperlink{_definitions_8hpp_aafb370ff4bd2c34323873e8df74f4a4b}{PortIndex}}\ \textcolor{keyword}{const}\ portIndex);}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00128\ \ \ \ \ std::shared\_ptr<NodeDelegateModelRegistry>\ \_registry;}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \ \ \mbox{\hyperlink{_definitions_8hpp_a7883a827397342fb69135c5efaeedff3}{NodeId}}\ \_nextNodeId;}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \ \ std::unordered\_map<NodeId,\ std::unique\_ptr<NodeDelegateModel>>\ \_models;}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \ \ std::unordered\_set<ConnectionId>\ \_connectivity;}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keyword}{mutable}\ std::unordered\_map<NodeId,\ NodeGeometryData>\ \_nodeGeometryData;}
\DoxyCodeLine{00137\ \};}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \}\ \textcolor{comment}{//\ namespace\ QtNodes}}

\end{DoxyCode}
